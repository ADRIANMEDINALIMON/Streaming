

<main class="container-fluid bg-bubble bg-black">
  <div class="row d-flex margin-cont">
    <div class="text-white" id="content">
      <h1>Bienvenido</h1>
      <p>Streaming</p>
    </div>
  </div>

  <div class="row">
    <div
      id="mainCarousel"
      class="carousel slide overflow-hidden shadow-lg p-0"
      data-bs-ride="carousel"
    >
      <div class="carousel-inner">
        <div class="carousel-item active">
          <img
            src="assets/main_carousel.jpg"
            class="d-block w-100"
            alt="Imagen 1"
          />
        </div>
        <div class="carousel-item">
          <img
            src="assets/main_carousel2.jpg"
            class="d-block w-100"
            alt="Imagen 2"
          />
        </div>
        <div class="carousel-item">
          <img
            src="assets/main_carousel3.webp"
            class="d-block w-100"
            alt="Imagen 3"
          />
        </div>
      </div>
      <button
        class="carousel-control-prev"
        type="button"
        data-bs-target="#mainCarousel"
        data-bs-slide="prev"
      >
        <span class="carousel-control-prev-icon"></span>
        <span class="visually-hidden">Anterior</span>
      </button>
      <button
        class="carousel-control-next"
        type="button"
        data-bs-target="#mainCarousel"
        data-bs-slide="next"
      >
        <span class="carousel-control-next-icon"></span>
        <span class="visually-hidden">Siguiente</span>
      </button>
      <div class="carousel-indicators">
        <button
          type="button"
          data-bs-target="#mainCarousel"
          data-bs-slide-to="0"
          class="active"
          aria-label="Slide 1"
        ></button>
        <button
          type="button"
          data-bs-target="#mainCarousel"
          data-bs-slide-to="1"
          aria-label="Slide 2"
        ></button>
        <button
          type="button"
          data-bs-target="#mainCarousel"
          data-bs-slide-to="2"
          aria-label="Slide 3"
        ></button>
      </div>
    </div>
  </div>

  <h2 class="text-center text-white my-4">Cat√°logo</h2>

  <div
    class="row d-flex align-items-center justify-content-center h-100 px-md-5 px-3"
  >
    <ng-container *ngIf="movies.length > 0; else loading">
      <div
        class="col-12 col-md-6 col-lg-4 mb-4 h-100"
        *ngFor="let card of movies; let i = index"
        [id]="'card-' + i"
      >
        <div class="card d-flex h-100 shadow-lg bg-card rounded-5 p-2">
          <div
            [id]="'carousel-' + i"
            class="carousel slide"
            data-bs-ride="carousel"
          >
            <div class="carousel-inner h-100">
              <div
                class="carousel-item"
                *ngFor="let movie of movies; let imgIdx = index"
                [class.active]="imgIdx === 0"
              >
                <img
                  [src]="
                    'https://image.tmdb.org/t/p/w500' + movie.backdrop_path
                  "
                  [alt]="movie.title"
                  class="d-block w-100 rounded-5"
                  [alt]="'Imagen ' + imgIdx"
                />
              </div>
            </div>
            <button
              class="carousel-control-prev"
              type="button"
              [attr.data-bs-target]="'#carousel-' + i"
              data-bs-slide="prev"
            >
              <span class="carousel-control-prev-icon"></span>
              <span class="visually-hidden">Anterior</span>
            </button>
            <button
              class="carousel-control-next"
              type="button"
              [attr.data-bs-target]="'#carousel-' + i"
              data-bs-slide="next"
            >
              <span class="carousel-control-next-icon"></span>
              <span class="visually-hidden">Siguiente</span>
            </button>
          </div>

          <div class="card-body">
            <h3 class="card-text text-white">{{ card.title }}</h3>
            <p class="card-text text-white">{{ card.overview }}</p>
            <div class="d-flex flex-column justify-content-between">
              <button class="btn btn-primary w-100 my-1" (click)="viewCard(i)">
                Ver
              </button>
              <button class="btn btn-danger w-100 my-1" (click)="hideCard(i)">
                Ocultar
              </button>
            </div>
          </div>
        </div>
      </div>
    </ng-container>

    <ng-template #loading>
      <div class="text-center my-5 bg-warning">
        <div class="spinner-border text-warning" role="status">
          <span class="visually-hidden">Cargandooooo desesperado...</span>
        </div>
        <p class="mt-3">Cargando Movies...</p>
      </div>
    </ng-template>
  </div>
</main>
